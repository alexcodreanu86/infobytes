<div class="row one-page-view">
	<div class="small-10 small-offset-1">
		<h1><%= @tutorial.title %></h1>
		<p><%= link_to "written by: #{@author.user_name}", user_path(@author) %></p>

	  <div class="table-of-contents">
      <h2 class="toc">Table of Contents:</h2>
	    <% @chapters.each_with_index do |chapter, index| %>
        <h2><%= link_to chapter.title, "#Section_#{under_score(chapter.title)}" %></h2>
        <div class="row">
        	<div class="small-11 small-offset-1">
        		<% chapter.sub_chapters.each_with_index do |sub_chapter, sub_index| %>
        	    <h4><%= link_to "- #{sub_chapter.title}", "#Sub_Section_#{under_score(sub_chapter.title)}" %></h4>
            <% end %>
        	</div>
        </div>
    	<% end %>
	  </div>

    
	  <div class="tutorial-body">
      <% @chapters.each_with_index do |chapter, index| %>
	      <h3 class="section-title" id="Section_<%= under_score(chapter.title) %>"><%= chapter.title %></h3>
          <div class="row">
          	<div class="small-10 small-offset-1">
		          <% chapter.sub_chapters.each_with_index do |sub_chapter, index| %>
				        <h4 class="sub-section-title" id="Sub_Section_<%= under_score(sub_chapter.title) %>"><%= sub_chapter.title %></h4>
				        <% sub_chapter.contents.each do |content| %>
                  
                  <% if content.attachable_type == "Paragraph" %>
                    <div class="paragraph">
                    	<%= content.attachable.body.html_safe %>
                    </div>
                  <% elsif content.attachable_type == "CodeSnippet" %>
	      						<div class="code-snippet">	
	      							<div id="editor-<%= content.id %>" style="height: 200px; width: 100%; background-color:#eee"><%= content.attachable.body %></div>
								      
								      <script>
								        var editor = ace.edit("editor-<%= content.id %>");
								        editor.setTheme("ace/theme/textmate");
								        editor.session.setMode("ace/mode/" + "<%= content.attachable.language %>");
								        editor.getSession().setUseWrapMode(true);
								        editor.setReadOnly(true)
								        editor.setOptions({
								          maxLines: 30
								          });
								      </script>
								    </div>
                  <% else %>
                    <div class="image">
                    	<%= image_tag content.attachable.image_path.url(:original) %>
                    </div>
                  <% end %>

				        <% end %>
				      <% end %>
						</div>
					</div>
      <% end %> 
	  </div>
	</div>
</div>